{% assign gallery = include.gallery %}
<div class="carousel" data-flickity data-flickity-options='{ "bgLazyLoad": true, "bgLazyLoad": 1 }'>
  {% for item in site.data.galleries %}
    {% if item.title == gallery %}
      {% for item in item.items %}
      <div class="carousel-cell" data-flickity-bg-lazyload="{{ item.url }}" style="{% if item.background-size %}background-size: {{ item.background-size }};{% endif %}">
        {% if item.title or item.caption %}
        <div class="container intro-text">
            {% if item.title %}<h3 class="display-3">{{ item.title }}</h3>{% endif %}
            {% if item.title %}<br><h3>{{ forloop.length }} images</h3>{% endif %}
        </div>
        {% if item.caption %}<div class="lead">{{ item.caption }}</div>{% endif %}
        {% endif %}
      </div>
      {% endfor %}
    {% endif %}
  {% endfor %}
</div>
